(()=>{"use strict";function e(){return"K85339385488957"}const t=t=>{let n={atk:null,critDmg:null,critRate:null,elemMastery:null,atkPercent:null};const a=async(e,t,a)=>{const s=document.createElement("p");"ATK"===e[a]?(n.atk=e[a+1],s.textContent=`${e[a+1]}`):(e=>{(new Map).set("Gladiator's Destiny","Emblem");const t=new RegExp("^CRIT Rate"),a=new RegExp("^CRIT DMG"),s=new RegExp("^Elemental Mastery");return t.test(e)||a.test(e)?((async(e,t,a)=>{e.test(a)&&(n.critRate=a.replace("CRIT Rate+","").replace("%","")),t.test(a)&&(n.critDmg=a.replace("CRIT DMG+","").replace("%",""))})(t,a,e),!0):!!s.test(e)&&(n.elemMastery=e,!0)})(e[a])?s.textContent=`${e[a]}`:console.log("This stat is not factored in calculating damage"),t.appendChild(s)};return{extractText:async()=>{try{var n=new Headers;n.append("apikey",`${e}`);var s=new FormData;s.append("language","eng"),s.append("base64Image",`${t}`),s.append("OCREngine",2);var c={method:"POST",headers:n,body:s,redirect:"follow"};const r=await fetch("https://api.ocr.space/parse/image",c),o=await r.json();(async e=>{try{const t=e.ParsedResults[0].ParsedText,n=await t.split("\n"),s=document.querySelector("body");for(let e=0;e<n.length;e++)a(n,s,e);document.body.append(document.createElement("hr"))}catch(e){console.log(e)}})(o),console.log(o)}catch(e){console.log(e)}},dmgStats:n}},n=()=>({requestImg:async()=>{document.getElementById("screenshot").addEventListener("change",(function(){const e=new FileReader;e.addEventListener("load",(()=>{sessionStorage.setItem("artifact",e.result)})),e.readAsDataURL(this.files[0])})),document.getElementById("submit").addEventListener("click",(()=>{const e=sessionStorage.getItem("artifact");e&&document.querySelector("#img-preview").setAttribute("src",e)}))}});document.addEventListener("DOMContentLoaded",(function(){n().requestImg(),document.querySelector("#scan-btn").addEventListener("click",(()=>{let e=sessionStorage.getItem("artifact");const n=t(e);n.extractText(),console.log(n.dmgStats)}))}))})();
(()=>{"use strict";function e(){return"K85339385488957"}const t=t=>{let n={atk:null,critDmg:null,critRate:null,elemMastery:null,atkPercent:null};const s=async(e,t,s)=>{const c=document.createElement("p");"ATK"===e[s]?(n.atk=e[s+1],c.textContent=`${e[s+1]}`):(e=>{(new Map).set("Gladiator's Destiny","Emblem");const t=new RegExp("^CRIT Rate"),s=new RegExp("^CRIT DMG"),c=new RegExp("^Elemental Mastery");return t.test(e)||s.test(e)?((async(e,t,s)=>{e.test(s)&&(n.critRate=s.replace("CRIT Rate+","").replace("%","")),t.test(s)&&(n.critDmg=s.replace("CRIT DMG+","").replace("%",""))})(t,s,e),!0):!!c.test(e)&&(n.elemMastery=e,!0)})(e[s])?c.textContent=`${e[s]}`:console.log("This stat is not factored in calculating damage"),t.appendChild(c)};return{extractText:async()=>{const n=`https://api.ocr.space/parse/imageurl?apikey=${e}&url=${t}&filetype=png&OCREngine=2`;try{const e=await fetch(n),t=await e.json();(async e=>{try{const t=e.ParsedResults[0].ParsedText,n=await t.split("\n"),c=document.querySelector("body");for(let e=0;e<n.length;e++)s(n,c,e);document.body.append(document.createElement("hr"))}catch(e){console.log(e)}})(t),console.log(t)}catch(e){console.log(e)}},dmgStats:n}},n=()=>{const e=document.getElementById("screenshot"),t=document.getElementById("submit");return{requestImg:()=>{e.addEventListener("change",(function(){const e=new FileReader;e.addEventListener("load",(()=>{console.log(e.result),sessionStorage.setItem("artifact",e.result)})),e.readAsDataURL(this.files[0])}))},getImg:()=>t.addEventListener("click",(()=>{const e=sessionStorage.getItem("artifact");e&&document.querySelector("#img-preview").setAttribute("src",e)}))}};document.addEventListener("DOMContentLoaded",(function(){const e=n();e.requestImg();let s=e.getImg();s=String(s);const c=s.replace(/[\r\n]/gm,"");document.querySelector("#scan-btn").addEventListener("click",(()=>{const e=t(c);e.extractText(),console.log(e.dmgStats),console.log("done")}))}))})();